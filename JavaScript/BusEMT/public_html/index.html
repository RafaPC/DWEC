<!DOCTYPE html>
<html>
    <head>
        <title>Simple Map</title>
        <meta name="viewport" content="initial-scale=1.0">
        <meta charset="utf-8">
        <!--script src="javascript/class_model/Arrive.js" type="text/javascript"></script>
        <script src="javascript/class_model/Arrives.js" type="text/javascript"></script>
        <script src="javascript/class_model/ListLineInfo.js" type="text/javascript"></script>
        <script src="javascript/class_model/ListLinesInfo.js" type="text/javascript"></script>
        <script src="javascript/class_model/Stop.js" type="text/javascript"></script>
        <script src="javascript/class_model/StopsLine.js" type="text/javascript"></script-->
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
        <script src="javascript/dao.js" type="text/javascript"></script>
        <script src="javascript/js.js" type="text/javascript"></script>
        <link href="css.css" rel="stylesheet" type="text/css"/>
    </head>
    <body>
        <div id="prueba">
            <div class="dropdown">
                <button onclick="dropdown()" class="dropbtn">LÃ­neas</button>
                <div id="myDropdown" class="dropdown-content"></div>
            </div>
        </div>
        <div id="map"></div>
        <script>
            var map;
            function initMap() {
                // Map Options
                var options = {
                    zoom: 15,
                    center: {lat: 40.4167, lng: -3.70325}
                };

                // New map
                map = new google.maps.Map(document.getElementById('map'), options);

                // Listen for click on map
                google.maps.event.addListener(map, 'click', function (event) {
                    addMarker({coords: event.latLng});
                });

                //Marcador
                var marker = new google.maps.Marker({
                    position: {lat: 40.41349419, lng: -3.68133283},
                    map: map
                            //icon: "resources/front-bus.png"
                });

            }

            function loadStops(stopsLine) {
                var polyCoords = [];
                for (var i = 0; i < stopsLine.length; i++) {

                    var stop = stopsLine[i];

                    // Meto las coordenadas en array          
                    polyCoords.push({lat: stop.latitude, lng: stop.longitude});

                    var marker = new google.maps.Marker({
                        position: {lat: stop.latitude, lng: stop.longitude},
                        map: map
                    });

                    var infoWindow = new google.maps.InfoWindow({
                        content: stop.name
                    });

                    marker.addListener('click', function () {
                        infoWindow.open(map, marker);
                    });
                }

                // Opciones del polyline
                var polyLine = new google.maps.Polyline({
                    path: polyCoords,
                    strokeColor: '#FF0000',
                    strokeWieght: 5
                });

                polyLine.setMap(map);
            }

            /*function addMarker(props) {
             var marker = new google.maps.Marker({
             position: props.coords,
             map: map
             });
             
             if (props.iconImage) {
             marker.setIcon(props.iconImage);
             }
             }*/

        </script>
        <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyCPSHcS_xzbFeu36FX9EOZ45cf9Y-oVfvM&callback=initMap"
        async defer></script>
        <script>
            /* When the user clicks on the button, 
             toggle between hiding and showing the dropdown content */
            function dropdown() {
                document.getElementById("myDropdown").classList.toggle("show");
            }

            // Close the dropdown if the user clicks outside of it
            window.onclick = function (event) {
                if (!event.target.matches('.dropbtn')) {
                    var dropdowns = document.getElementsByClassName("dropdown-content");
                    for (var i = 0; i < dropdowns.length; i++) {
                        var openDropdown = dropdowns[i];
                        if (openDropdown.classList.contains('show')) {
                            openDropdown.classList.remove('show');
                        }
                    }
                }
            };
        </script>
    </body>
</html>